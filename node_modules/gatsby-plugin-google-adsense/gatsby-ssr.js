"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

exports.onRenderBody = function (_ref, pluginOptions) {
  var pathname = _ref.pathname,
      setHeadComponents = _ref.setHeadComponents;

  if (process.env.NODE_ENV === "production" && pluginOptions.publisherId) {
    var excludePaths = [];

    if (pluginOptions.exclude && pluginOptions.exclude.length) {
      var Minimatch = require("minimatch").Minimatch;

      pluginOptions.exclude.map(function (exclude) {
        var mm = new Minimatch(exclude);
        excludePaths.push(mm.makeRe());
      });
    }

    if (excludePaths.some(function (excludePath) {
      return excludePath.test(pathname);
    })) {
      return;
    }

    setHeadComponents([_react.default.createElement("script", {
      async: true,
      src: "//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
    }), _react.default.createElement("script", {
      key: "gatsby-plugin-google-adsense",
      dangerouslySetInnerHTML: {
        __html: "            \n              (adsbygoogle = window.adsbygoogle || []).push({\n                google_ad_client: \"" + pluginOptions.publisherId + "\",\n                enable_page_level_ads: true\n              });\n          "
      }
    })]);
  }
};